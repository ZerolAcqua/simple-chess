"use strict";(self.webpackChunkstart=self.webpackChunkstart||[]).push([[57],{814:(e,t,n)=>{var o,i=n(865),r=n(169);!function(e){e[e.Opening=0]="Opening",e[e.Middle=1]="Middle",e[e.Ending=2]="Ending"}(o||(o={}));o.Opening;function a(e){return{p:e.p.slice().reverse().map((e=>e.map((e=>-e)))),n:e.n.slice().reverse().map((e=>e.map((e=>-e)))),b:e.b.slice().reverse().map((e=>e.map((e=>-e)))),r:e.r.slice().reverse().map((e=>e.map((e=>-e)))),q:e.q.slice().reverse().map((e=>e.map((e=>-e)))),k:e.k.slice().reverse().map((e=>e.map((e=>-e))))}}const c={p:[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],n:[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],b:[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],r:[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],q:[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],k:[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]]},s=c,m={p:[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[30,30,30,30,30,30,30,30],[25,25,25,25,25,25,25,25],[10,10,10,10,10,10,10,10],[5,5,5,5,5,5,5,5],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],n:[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,5,5,5,5,-20,-40],[-30,5,10,15,15,10,5,-30],[-30,5,15,20,20,15,5,-30],[-30,5,15,20,20,15,5,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,5,5,5,5,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],b:[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,5,5,5,5,0,-10],[-10,5,10,10,10,10,5,-10],[-10,5,10,10,10,10,5,-10],[-10,5,10,10,10,10,5,-10],[-10,5,10,10,10,10,5,-10],[-10,0,5,5,5,5,0,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],r:[[-5,-5,-5,-5,-5,-5,-5,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,-5,-5,-5,-5,-5,-5,-5]],q:[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,5,5,5,5,0,-10],[-10,5,5,5,5,5,5,-10],[-5,5,5,5,5,5,5,-5],[-5,5,5,5,5,5,5,-5],[-10,5,5,5,5,5,5,-10],[-10,0,5,5,5,5,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],k:[[0,0,0,0,0,0,0,0],[8,8,10,11,11,10,8,8],[6,6,7,9,9,7,6,6],[4,4,5,7,7,5,4,4],[2,2,3,5,5,3,2,2],[0,2,2,3,3,2,2,0],[-5,-2,-2,0,0,-2,-2,-5],[-5,-5,-5,-5,-5,-5,-5,-5]]};a(c),a(s),a(m);var p;!function(e){e[e.init=0]="init",e[e.params=1]="params",e[e.pending=2]="pending",e[e.result=3]="result"}(p||(p={}));var d,l;n(336);!function(e){e[e.init=0]="init",e[e.startTurn=1]="startTurn",e[e.move=2]="move",e[e.promote=3]="promote",e[e.botThinking=4]="botThinking",e[e.gameover=5]="gameover"}(d||(d={})),function(e){e[e.white=0]="white",e[e.black=1]="black"}(l||(l={}));let u,v,g,k=new Worker(new URL(n.p+n.u(668),n.b));k.onmessage=e=>{let t=e.data;switch(t.type){case p.result:return y--,void(I<=2?setTimeout((()=>{t.id===b&&(u=t.move,D())}),500):t.id===b&&(u=t.move,D()));case p.pending:return;default:throw new Error("Invalid message type")}};let h,b=0,w=0,f=0,y=0,E="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",P=new r.d$(E),I=3,B=d.init,T=l.white,q={whitePlay:()=>{},blackPlay:()=>{}};function L(){!function(){let e=document.querySelector('input[name="whitePlay"]:checked').value,t=document.querySelector('input[name="blackPlay"]:checked').value;q.whitePlay="bot"===e?C:M,q.blackPlay="bot"===t?C:M}(),I=parseInt(document.getElementById("search-depth").value,10),u=void 0,v=void 0,g=void 0,f=w=Date.now(),b++,k.postMessage({type:p.init,id:b,searchDepth:I}),P.load(E),B=d.init,T="w"===P.turn()?l.white:l.black,G(),D()}function O(){T=T===l.white?l.black:l.white,B=d.init,G(),D()}function D(){if(!R()){switch(T){case l.white:q.whitePlay();break;case l.black:q.blackPlay()}R()}}function M(){switch(B){case d.init:case d.startTurn:case d.move:if(B=d.move,v){let e=P.moves({square:v.from,verbose:!0}),t=e.map((e=>e.to)).indexOf(v.to);if(-1===t)return!1;e[t].flags.includes("p")?(B=d.promote,v.to,document.getElementById("promotion").classList.remove("d-none")):(P.move(v),v=void 0,O())}break;case d.promote:if(void 0===g?.promotion)return;P.move(g),g=void 0,document.getElementById("promotion").classList.add("d-none"),O();break;case d.gameover:case d.botThinking:break;default:throw new Error("Invalid game state")}}function C(){switch(B){case d.botThinking:return void(u&&(B=d.move,D()));case d.init:case d.startTurn:case d.move:if(B=d.move,u){try{P.move(u)}catch(e){}u=void 0,O()}else k.postMessage({type:p.params,id:b,pgn:P.pgn()}),y++,B=d.botThinking;break;default:throw new Error("Invalid game state")}}function R(){return B===d.gameover||!!P.isGameOver()&&(B=d.gameover,P.isCheckmate(),window.setTimeout((()=>alert("Game over")),250),!0)}function G(){h.position(P.fen()),K()}function K(){const e=document.getElementById("gamePGN");e&&(e.innerHTML=P.pgn({maxWidth:5,newline:"<br />"}))}const N={draggable:!0,position:E,onDragStart:({square:e,piece:t})=>B!==d.gameover&&(!(!(T===l.white&&q.whitePlay===M||T===l.black&&q.blackPlay===M)||!function(e){const t=P.get(e);return!!t&&t.color===P.turn()}(e)||B===d.promote)&&void 0),onDrop:({source:e,target:t,piece:n})=>{if(v={from:e,to:t},D(),B!==d.promote)return"snapback"},onChange:(e,t)=>{}};h=(0,i.Fm)("board",N),L(),document.getElementById("restart").addEventListener("click",(()=>{Date.now()-f<1e3||y>4||L()})),document.getElementById("promotionQueen").addEventListener("click",(()=>{g={...v,promotion:"q"},D()})),document.getElementById("promotionRook").addEventListener("click",(()=>{g={...v,promotion:"r"},D()})),document.getElementById("promotionBishop").addEventListener("click",(()=>{g={...v,promotion:"b"},D()})),document.getElementById("promotionKnight").addEventListener("click",(()=>{g={...v,promotion:"n"},D()}))}},e=>{e.O(0,[169,230],(()=>{return t=814,e(e.s=t);var t}));e.O()}]);